---
slug: maci-v1-2-0-release
title: Maci v1.2.0 Release
authors:
  name: ctrlc03
  title: MACI team
  url: https://pse.dev
  image_url: /img/pse-logo-round.png
tags: [release, audit, security, documentation]
---

# MACI v1.2 Release

We are pleased to announce the release of MACI - Minimal Anti-Collusion Infrastructure - [v1.2.0](https://github.com/privacy-scaling-explorations/maci/releases/tag/v1.2.0)!

This is our first release since [MACI v1.1.1](/blog/maci-v1-1-1-release) just over one year ago. This new release focuses on improved developer experience, security, performance and clearer documentation for users looking to learn and use MACI.

## Background

MACI is an application that provides privacy and collusion resistance for on-chain voting, both in a [quadratic](https://vitalik.eth.limo/general/2019/12/07/quadratic.html) and non-quadratic fashion. It was originally created after Vitalik's [resarch post](https://ethresear.ch/t/minimal-anti-collusion-infrastructure/5413), and has been maintained and improved since.

The participants of a voting process on MACI are 1) the voters and 2) a trusted coordinator. The coordinator is in charge of setting up the system, computing the tally of the votes and ensuring everything is done in a fair manner.

Below are MACI's main properties.

| Property             | Description                                                                                                             |
| -------------------- | ----------------------------------------------------------------------------------------------------------------------- |
| Collusion Resistance | no one except a trusted coordinator should be certain of the validity of a vote, reducing the effectiveness of bribery. |
| Receipt-freeness     | no one can prove (besides to the coordinator) which way they voted.                                                     |
| Privacy              | no one except a trusted coordinator should be able to decrypt a vote.                                                   |
| Uncensorability      | no one — not even the trusted coordinator, should be able to censor a vote.                                             |
| Unforgeability       | only the owner of a user's private key may cast a vote tied to its corresponding public key.                            |
| Non-repudiation      | no one may modify or delete a vote after it is cast, although a user may cast another vote to nullify it.               |
| Correct execution    | no one, not even the trusted coordinator, should be able to produce a false tally of votes.                             |

MACI's effectiveness can be seen in projects such as [clr.fund](https://github.com/clrfund) and [QF](https://github.com/privacy-scaling-explorations/qf). Both are quadratic funding implementations, a mechanism which otherwise is highly susceptible to collusion and bribery. Most notably, clr.fund is already working on integrating MACI v1.2, after having used v0.x until now. You can follow their development effort under this [GitHub branch](https://github.com/clrfund/monorepo/tree/feat/maci-v1).

This post will not focus on the technical details. We'd recommend referring to our [v1 technical introduction article](/blog/maci-1-0-technical-introduction) for a deep dive of MACI's technical details.

## Refactoring Work

Our top priority and focus of recent months has been dedicated to improving the developer experience of MACI through refactoring the existing code, fixing bugs and enhancing our documentation.

The refactoring work included the following:

1. Updated libraries to their latest versions, and replaced unsupported dependencies with up-to-date and actively maintained alternatives.
2. Refactored the code to be standardized, modular, well-commented, and consistently formatted.
3. Fixed bugs and addressed issues reported by the community.

### Updating libraries

MACI has been using some custom code since its initial implementation. This includes dependencies on repositories created by one of the original MACI developers, [Koh Wei Jie](https://github.com/weijiekoh). We felt that MACI could benefit from a dependency refresh to use libraries that are actively maintained. We decided to integrate open source libraries such as [zk-kit](https://github.com/privacy-scaling-explorations/zk-kit) and [circomkit](https://github.com/erhant/circomkit) to deal with certain aspects of the protocol.

For circuit-related tasks, such as compiling circuits, generating test zkeys, and unit tests, we now use [circomkit](https://github.com/erhant/circomkit). This toolkit allows us to use well-maintained code, which fits all our circuit needs.

For logic that could be reused by other projects, such as our[Poseidon permutation](https://github.com/privacy-scaling-explorations/zk-kit/tree/main/packages/poseidon-cipher) encryption and decryption code, we've extracted this to [zk-kit](https://github.com/privacy-scaling-explorations/zk-kit). This way other projects can more easily leverage the code, while also helping make it more battle-tested. In the coming months, we're expecting to extract as much logic as possible from MACI and include it in projects like zk-kit, where other developers could benefit from it. These efforts will continue to be tracked [here](https://github.com/privacy-scaling-explorations/zk-kit/issues/131).

At [Privacy and Scaling Explorations (PSE)](https://https//pse.dev/en/about), we're all about building code that is open source and aids public goods. Thus, we feel that it's value-aligned for MACI to support these other open source projects. We plan to continue integrating with other projects where sensible, as well as contributing code that could be re-used by others in the community.

### Code refactoring

We've undergone extensive efforts to clean up MACI's code:

- Removed dead and redundant code.
- Split monolithic files into smaller files to incorporate a logical structure.
- Added extensive code comments and integrated automated documentation generators ([TypeDoc](https://typedoc.org/) and [solidity-docgen](https://github.com/OpenZeppelin/solidity-docgen))
- Enforced strong type safety on the TypeScript components.
- Optimized and modularized the smart contract code.
- Extended the test suites.

We are now confident that developers coming across MACI for the first time will have a much easier time finding the information they need in order to best utilize it.

## New Features

### Support for standard voting strategies

After years of having quadratic voting (QV) built into MACI, we now support non-quadratic voting polls. This opens up the door to potential integrations with a wider variety of projects, such as DAO governance tooling.

The new version of the Tally circuit (specific for non-QV), has reduced constraints, providing a faster experience for MACI's coordinators generating proofs of vote tallying.

We welcome projects to build on top of this feature to provide secure, on-chain, voting. Please get in touch with out team if you're interested in integrating!

### New Gatekeepers (EAS and Hats Protocol)

As part of configuring a MACI deployment, the coordinator sets a user signup gatekeeper contract in order to protect from sybil attacks. This contract dictates the criteria a user must pass in order to participate in a poll.For example, user might need to prove ownership of a certain NFT (ERC-721 token), or prove that they have passed some sort of proof-of-personhood verification.

With the addition of these two new gatekeepers, [EAS](https://attest.sh/) and [Hats Protocol](https://www.hatsprotocol.xyz/), MACI instances could be configured to only allow Ethereum accounts who have received a trusted EAS attestation, or who "wear a hat" of a certain role created by the Hats Protocol.

We expect to continue to expand our gatekeeper capabilities and welcome the community to come up with new and innovative ways to grant access to MACI's rounds, helping make MACI more flexible and sybil-resilient.

### Documentation website

All of MACI's documentation has been consolidated under our shiny new [website](https://maci.pse.dev/).

Moving forward, every blog release, documentation update and roadmap update will be posted on this website. Please use it as the source of truth around MACI and report any inconsistencies you may find, as well as any suggestions on how to make this better.

## Security Audit and Bug Fixes

Thanks to PSE's internal audit team and [clr.fund's](https://clr.fund/#/) core developer [yuetloo](https://github.com/yuetloo), we've identified and fixed several bugs during our refactoring work.

Most notably, MACI v1.x was vulnerable to a long-standing bug which could have allowed coordinators to censor votes. This bug was first identified by [Kyle](https://github.com/kcharbo3) and a [fix](https://github.com/privacy-scaling-explorations/maci/pull/1170) has now been implemented.

For more details on our recent audit, please refer to the following report:
TODO ADD LINK TO AUDIT REPORT

After this audit and the resulting fixes, we feel more confident with MACI and its security.

### Trusted Setup ceremony

<!-- TODO: update to say we'll be running a new ceremony for v1.2 shortly -->
<!-- TODO: read through & update below -->
<!-- TODO should we just run the ceremony before releasing the post? Nah, another opportunity to call out the upgrade -->
<!-- As we did with our v1.1.1 ceremony, we'll run  a new one for the latest version of our MACI circuits, since we use Groth16 -->
<!-- We'll leverage P0tion, our project which enables running ceremonies fast & easily -->

Recently, we concluded our [MACI trusted setup ceremony](https://ceremony.pse.dev/projects/Maci%20v1%20Trusted%20Setup%20Ceremony) for [MACI v1.1.1](/blog/maci-v1-1-1-release). However, due to the security issues identified in the circuits, there will be need for a new ceremony. This will include the updated `[processMessages](https://github.com/privacy-scaling-explorations/maci/blob/dev/circuits/circom/processMessages.circom)` circuit.

The artifacts for v.1.1.1 can be found on our [website](https://maci.pse.dev/docs/trusted-setup), and the `[tallyVotes](https://github.com/privacy-scaling-explorations/maci/blob/dev/circuits/circom/tallyVotes.circom)` artifacts can still be used in production. The page will be updated at the end of the ceremony with the new production-ready zKey artifacts for the updated `[processMessages](https://github.com/privacy-scaling-explorations/maci/blob/dev/circuits/circom/processMessages.circom)` circuit.

## How to get involved

At MACI we're actively making efforts to prioritize our community. From [publishing public roadmaps](https://github.com/privacy-scaling-explorations/maci/discussions/859), to open discussions around [repository management processes](https://github.com/privacy-scaling-explorations/maci/discussions/847), and a [public Discord channel](https://discord.com/invite/sF5CT5rzrR) for anyone and everyone BUILD-ing to chat with the team, we are intentional about committing to improving MACI to ensure it supports what the community would like to build.

With every issue, PR, feature and roadmap iteration, we welcome feedback to ensure that the continued development of MACI reflects your and the community's needs. Keep an eye out on our [documentation](https://maci.pse.dev/), [GitHub discussions](https://github.com/privacy-scaling-explorations/maci/discussions) and our official [Twitter/X account](https://twitter.com/zkMACI) for updates.

Should you wish to get involved with MACI, report a bug, or give feedback, feel free to visit the [repository](https://github.com/privacy-scaling-explorations/maci) and open an issue, or comment under an open issue to notify the team of your intention to work on it. We would be happy to support you in your endeavor!

To implement MACI into a project, the [documentation](https://maci.pse.dev/) can be used a reference, as well as reviewing how [clr.fund](https://github.com/clrfund) and [qf](https://github.com/privacy-scaling-explorations/qf) use MACI in their code.

For any other questions, feedback or to simply connect with our team and community, please reach out to us via PSE's [Discord](https://discord.com/invite/sF5CT5rzrR), in our [`#🗳️-maci` channel](https://https//discord.com/channels/943612659163602974/1164613809730748507).

## References

- [MACI GitHub repository](https://github.com/privacy-scaling-explorations/maci)
- [MACI documentation](https://maci.pse.dev/)
- [A technical introduction to MACI 1.0 - Kyle Charbonnet](/blog/maci-1-0-technical-introduction)
- [Minimal anti-collusion infrastructure - Vitalik](https://ethresear.ch/t/minimal-anti-collusion-infrastructure/5413)
- [Discord server](https://discord.com/invite/sF5CT5rzrR)

## Release

Here is a link to the new release code in GitHub - [v1.2.0 Release](https://github.com/privacy-scaling-explorations/maci/releases/tag/v1.2.0).
